modifier: MichaelMahemoff
created: 200508181151
modified: 200609101232
tags: systemConfig

/***
|''Name''|
|''Description''|
|''Version''|1.0.0
|''Status''|stable
|''License''|[[BSD open source license]]
|''~CoreVersion''|2.4.0
!Usage
{{{
<<license>>
}}}
Aggregates license tiddlers
!Code
***/
//{{{
if(!version.extensions.LicensePlugin) {
version.extensions.LicensePlugin = {installed:true};
//--
//-- License
//--
config.macros.license = {};
config.macros.license.handler = function(place,macroName,params,wikifier,paramString,tiddler) {

  var license = tiddler.title; // e.g. Apache_2_0

 var dimensions = [
    { name: "In Plain English",       prefix: "plain"  },
    { name: "Our Company Policy",     prefix: "policy" },
    { name: "Official Text",          prefix: "text"   },
    { name: "Usage in our Company",   prefix: "usage"  },
    { name: "Useful Links",           prefix: "links"  }
  ];

  forEach(dimensions, function(dimension) {
    var licenseDimensionTiddler = store.getTiddler(license + "_" + dimension.prefix);
    if (licenseDimensionTiddler) {
      createTiddlyElement(place, "h2", null, null, dimension.name);
      // var content = createTiddlyElement(place, "div", null, null, licenseDimensionTiddler.text);
      var content = createTiddlyElement(place, "div");
      wikify(licenseDimensionTiddler.text, content);
    }
  });

};
}
//}}}
