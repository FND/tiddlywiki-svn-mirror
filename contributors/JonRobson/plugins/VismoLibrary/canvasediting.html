<html>
<head>

<script type='text/javascript' src='jquery.js'></script>
<script type='text/javascript' src='Vismo.js'></script>
<script type='text/javascript' src='farbtastic.js'></script>

<style type="text/css">
.VismoCanvasToolbar{
	float:right;
}
textarea {
	width:600px;
	height:300px;
}
.centerMark {
	width:20px;
	height:20px;
	background-color:Purple;
	z-index:11;
}
.button { 
	width:25px;
	height:25px;
	float:right;
}
.brResizer {width:10;height:10; background-color:red;}
.selectshape{
	background-image:url(Vismo/select.png);
	background-repeat:no-repeat;
	height:25px	
}
.selected {border:solid 1px black;z-index:10;}
.newcircle{
	background-image:url(Vismo/circle.png);
	background-repeat:no-repeat;
	height:25px
}
.fillshape{
	background-image:url(Vismo/fill.png);
	background-repeat:no-repeat;
	height:25px
}

.newline{
	background-image:url(Vismo/line.png);
	background-repeat:no-repeat;
	height:30px
}
.newfreeline{
	background-image:url(Vismo/freehand.jpg);
	background-repeat:no-repeat;
	height:30px
	
}
.VismoToolSettings {
	position:absolute;
	background-color:white;
	bottom: 0px;
	left: 0px;
}

.farbtastic {
  position: relative;
}
.farbtastic * {
  position: absolute;
  cursor: crosshair;
}
.farbtastic, .farbtastic .wheel {
  width: 195px;
  height: 195px;
}
.farbtastic .color, .farbtastic .overlay {
  top: 47px;
  left: 47px;
  width: 101px;
  height: 101px;
}
.farbtastic .wheel {
  background: url(Vismo/wheel.png) no-repeat;
  width: 195px;
  height: 195px;
}
.farbtastic .overlay {
  background: url(Vismo/mask.png) no-repeat;
}
.farbtastic .marker {
  width: 17px;
  height: 17px;
  margin: -8px 0 0 -8px;
  overflow: hidden; 
  background: url(Vismo/marker.png) no-repeat;
}
.VismoToolSettings {background-color:rgb(245,245,245);border:solid 1px black;}
.VismoToolFillColor {width:100px;}
.VismoToolFillOpacity {width:50px;}
.previewcolor {border:solid 1px black;width:20px;height:20px;display:block;}

</style>
<script type='text/javascript'>
var vismoCanvasEditor;
jQuery(document).ready(function(){
	vismoCanvasEditor = new VismoCanvasEditor('xbrowsercanvas',{
		panzoom:true,
		tools: ["selectshape","newcircle","newline","fillshape","save"],
		save: function(textContent){$("#data").text(textContent);},
		dblclick:function(e,s){if(!s) return;alert(s.getProperty("id"));},
		mouseup: function(e,s){
			if(!s) return;
			var color = s.getProperty("fill");
			s.setProperty("fill","rgb(0,0,0)");
			var f = function(){
				s.setProperty("fill",color);
			}
			window.setTimeout(f,100);
			
		}
	});

	loadData();
});

function loadData(){
	var text = $("#data").text();
	vismoCanvasEditor.load(text);
}
</script>
</head>
<body>
<div id='xbrowsercanvas' style='width:800px; height:400px; border:solid 1px black;'></div>
<!-- 	{shape: 'polygon', id:'7', fill: 'rgb(0,0,255)', transformation:{translate:{x:100,y:0}}, coordinates: [-200,-200, -50,-200,-50,-50,-200,-50]}, -->
<textarea id='data'>
[
	{shape:'circle', id:"1", fill:'rgb(255,0,0)',coordinates:[-40,-40,50]},
	{shape:'circle', id:"2", fill:'rgb(0,255,0)',transformation:{translate:{x:300,y:1},scale:{x:2,y:2}},coordinates:[-40,-40,50]},
		{shape:"path",id:"3",edge:"true",from:"1", to:"2",coordinates:[0,0,100,100]}
]
</textarea>
delete with backspace or "d" key.
<input type="button" onclick="javascript:loadData()" value='Load drawing'/>

</body>
</html>