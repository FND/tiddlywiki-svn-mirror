<html>
<head>

<script src="jquery.js" type="text/javascript"></script>
<script src="canvasMaps3D.js" type="text/javascript"></script>
<script src="geojsons/whereLegal.js" type="text/javascript"></script>

<script>
var eMap = null;
function init(){
	eMap = new EasyMap('wrapper');
	eMap.utils = EasyMapUtils;
	eMap.wrapper.onmouseup = function(e){
		console.log("clicked");
		var s = EasyMapUtils.getShapeAtClick(e);
		console.log("clicked.");
		
		var t = EasyMapUtils.resolveTargetWithMemory(e);
		if(t.getAttribute("class") == 'easyControl') return false;
		
		if(s){
			alert(s.properties.name);
			}
	};
	
	//eMap.utils._testCanvas(eMap.canvas.getContext('2d'));
	geojson = eMap.utils.fitgeojsontocanvas(eval(geojson),eMap.canvas);

	eMap.controller.addControl("pan");
	eMap.controller.addControl("zoom");
	eMap.controller.addControl("mousepanning");
	eMap.controller.addControl("mousewheelzooming");

var that = eMap;
//eMap.mousemoveHandler = function(e,shape){};
eMap.clear();
eMap.drawFromGeojson(geojson);
}

</script>
</head>
<body onload="window.setTimeout(init,0)">
<h1>With mousewheel and mouse move zooming and panning</h1>
<div id='wrapper' style="width:800; height:400;position:relative;">
	<div id ='caption'></div>
	<div id='wrapper_statustext'>please wait while we load... </div>
</div>
<div id='time'></div>
<br>
<br>
<br>
<a href="javascript:eMap.zoom(0.5,0.5)">zoom in</a> <a href="javascript:eMap.zoom(-0.5,-0.5)">zoom out</a>


<a href="javascript:eMap.pan(0,20)">up</a> <a href="javascript:eMap.pan(0,-20)">down</a>

<a href="javascript:eMap.pan(20,0)">left</a> <a href="javascript:eMap.pan(-20,0)">right</a>


<div id='consolelogger'></div>


</body>
</html>