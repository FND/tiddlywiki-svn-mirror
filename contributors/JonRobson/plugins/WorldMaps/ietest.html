<html>
<head>


<script src="jquery.js" type="text/javascript"></script>

<script src="ieHack.js" type="text/javascript"></script>
<script src="canvasMaps3D.js" type="text/javascript"></script>
<script src="whereLegal.js" type="text/javascript"></script>

<script>
var eMap = null;
function init(){
	eMap = new EasyMap('wrapper');
	eMap.clickHandler = function(e){

		var s = eMap.utils.getShapeAtClick(e);
		
		if(s){
			alert(s.properties.name);
			}
			
	};
	
	eMap.utils._testCanvas(eMap.ctx);
	geojson = eMap.utils.fitgeojsontocanvas(eval(geojson),eMap.canvas);

	eMap.addControl("pan");
	eMap.addControl("zoom");
	eMap.addControl("mousepanning");


var that = eMap;
eMap.mousemoveHandler = function(e,shape){
	if(!e) {
		e = window.event;
	}
	var tt =document.getElementById('tooltip');
	if(!tt){
		tt = document.createElement('div');
		tt.style.position = "absolute";
		tt.id = 'tooltip';
		tt.setAttribute("class","tooltip");
		eMap.wrapper.appendChild(tt);
	}
	
	var x = e.clientX; var y = e.clientY;

	if(this.lastMouseMove && x < this.lastMouseMove.x + 2 && x > this.lastMouseMove.x -2) {return;}
	if(this.lastMouseMove &&  y < this.lastMouseMove.y + 2 && y > this.lastMouseMove.y -2) {return;}
	
	this.lastMouseMove = {};
	this.lastMouseMove.x = x;this.lastMouseMove.y = y;
	

	var shape = that.utils.getShapeAtClick(e);
	if(shape){
		tt.innerHTML = shape.properties.name;
		tt.style.left = x + "px";
		tt.style.top = y + "px";
		tt.style.display = "";
		
	}	
	else
		tt.style.display = "none";
	
	


};
eMap.clear();
eMap.drawFromGeojson(geojson);
}

</script>
</head>
<body onload="window.setTimeout(init,0)">
<h1>Countries where homosexual acts are legal/illegal</h1>

spin: <a href="javascript:eMap.spin(0,0,-0.1)"><--</a><a href="javascript:eMap.spin(0,0,0.1)">--></a>
<a href="javascript:eMap.spin(-0.1,0,0)">up</a> <a href="javascript:eMap.spin(0.1,0,0)">down</a>
<div id='wrapper' style="width:800; height:400;position:relative;">
	<div id ='caption'></div>
	<div id='wrapper_statustext'>please wait while we load... </div>
</div>
<div id='time'></div>
<br>
<br>
<br>
<a href="javascript:eMap.zoom(0.5,0.5)">zoom in</a> <a href="javascript:eMap.zoom(-0.5,-0.5)">zoom out</a>


<a href="javascript:eMap.pan(0,20)">up</a> <a href="javascript:eMap.pan(0,-20)">down</a>

<a href="javascript:eMap.pan(20,0)">left</a> <a href="javascript:eMap.pan(-20,0)">right</a>


<div id='consolelogger'></div>


</body>
</html>