<html>
<head>
<link rel="stylesheet" href="../../../../core/qunit/qunit/testsuite.css" type="text/css" media="screen"></link>
<script type="text/javascript" src="../../../../core/jquery/jquery-1.2.6.pack.js"></script>
<script type="text/javascript" src="../../../../core/qunit/qunit/testrunner.js"></script>
<script type="text/javascript" src="js/binaryajax.js"></script>
<script type="text/javascript" src="js/id3.js"></script>
<script>

$(document).ready(function(){

	function test_tags(o) 
	{
		var callback = function() {
			var tags = ID3.getAllTags(o.filename) || {};
			for(var key in o.tags){
				equals(tags[key], o.tags[key], key + " tag");
			}
			start();
		};
		ID3.loadTags(o.filename, callback);
		stop();
	}

	test("MP3 ID3 Version 1.0", function() {
		test_tags({
			filename: "data/Intruder-1.0.mp3",
			version: "1.0",
			tags: { artist: "Robot", title: "Intruder Alert", year: "", comment: "test file: ID3#v1.0" }
		});
	});
	test("MP3 ID3 Version 1.1", function() {
		test_tags({
			filename: "data/Intruder-1.1.mp3",
			version: "1.1",
			tags: { artist: "Robot", title: "Intruder Alert", year: "", comment: "test file: ID3#v1.1" }
		});
	});
	test("MP3 ID3 Version 2.2", function() {
		test_tags({
			filename: "data/Intruder-2.2.mp3",
			version: "2.2",
			tags: { artist: "Robot", title: "Intruder Alert", year: "", comment: "test file: ID3#v2.2" }
		});
	});
	test("MP3 ID3 Version 2.3", function() {
		test_tags({
			filename: "data/Intruder-2.3.mp3",
			version: "2.3",
			tags: { artist: "Robot", title: "Intruder Alert", year: "", comment: "test file: ID3#v2.3" }
		});
	});
	test("MP3 ID3 Version 2.4", function() {
		test_tags({
			filename: "data/Intruder-2.4.mp3",
			version: "2.4",
			tags: { artist: "Robot", title: "Intruder Alert", year: "", comment: "test file: ID3#v2.4" }
		});
	});

});
</script>
</head>
<body>
	<h1>ID3 Tag Parsing</h1>
	<h2 id="banner"></h2>
	<h2 id="userAgent"></h2>
	<ol id="tests"></ol>
	<div id="main"></div>
</body>
</html>
