(function(c){var e,b,d;e=function(f){for(var g=0;g<f.parents().length;g++){b=f.parents().get(g);d=c.browser.safari?c(b).css("background"):c(b).css("background-color");if(d!=""&&d!="transparent"){return d}}};function a(f){f.elem.style[f.prop]=parseInt(f.now)+f.unit}jQuery.extend(jQuery.fx.step,{borderTopWidth:a,borderBottomWidth:a,borderLeftWidth:a,borderRightWidth:a});jQuery.fn.flip=function(f){return this.each(function(){var m,k,l,j,h,i;m=c(this);if(m.data("flipLock")){return false}else{m.data("flipLock",1)}k={width:m.width(),height:m.height(),bgColor:f.bgColor||m.css("background-color"),fontSize:m.css("font-size")||"12px",direction:f.direction||"tb",toColor:f.color||"#f00",speed:f.speed||500,top:m.offset().top,left:m.offset().left,target:f.content||null,transparent:e(m)||"#fff",onBefore:f.onBefore||function(){},onEnd:f.onEnd||function(){},onAnimation:f.onAnimation||function(){}};l="flipClone_"+(new Date()).getTime();m.css("visibility","hidden").clone(true).appendTo("body").html("").css({visibility:"visible",position:"absolute",left:k.left,top:k.top,margin:0,zIndex:9999}).attr("id",l);j={tb:{start:{fontSize:"0px",lineHeight:"0px",borderTopWidth:k.height,borderLeftWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderTopColor:k.bgColor,borderBottomColor:k.transparent,borderLeftColor:k.transparent,borderRightColor:k.transparent,borderStyle:"solid",height:"0px",width:k.width},first:{borderTopWidth:"0px",borderLeftWidth:(k.height/100)*15,borderRightWidth:(k.height/100)*15,borderBottomWidth:"0px",borderTopColor:"#999",borderBottomColor:"#999",borderLeftColor:k.transparent,borderRightColor:k.transparent,top:(k.top+(k.height/2)),left:(k.left-(k.height/100)*15)},second:{borderBottomWidth:k.height,borderTopWidth:"0px",borderLeftWidth:"0px",borderRightWidth:"0px",borderTopColor:k.transparent,borderBottomColor:k.toColor,borderLeftColor:k.transparent,borderRightColor:k.transparent,top:k.top,left:k.left}},bt:{start:{fontSize:"0px",lineHeight:"0px",borderTopWidth:"0px",borderLeftWidth:"0px",borderRightWidth:"0px",borderBottomWidth:k.height,borderTopColor:k.transparent,borderBottomColor:k.bgColor,borderLeftColor:k.transparent,borderRightColor:k.transparent,borderStyle:"solid",height:"0px",width:k.width},first:{borderTopWidth:"0px",borderLeftWidth:(k.height/100)*15,borderRightWidth:(k.height/100)*15,borderBottomWidth:"0px",borderTopColor:"#999",borderBottomColor:"#999",borderLeftColor:k.transparent,borderRightColor:k.transparent,top:(k.top+(k.height/2)),left:(k.left-(k.height/100)*15)},second:{borderTopWidth:k.height,borderLeftWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderTopColor:k.toColor,borderBottomColor:k.transparent,borderLeftColor:k.transparent,borderRightColor:k.transparent,top:k.top,left:k.left}},lr:{start:{width:"0px",fontSize:"0px",lineHeight:"0px",borderTopWidth:"0px",borderLeftWidth:k.width,borderRightWidth:"0px",borderBottomWidth:"0px",borderTopColor:k.transparent,borderBottomColor:k.transparent,borderLeftColor:k.bgColor,borderRightColor:k.transparent,borderStyle:"solid",height:k.height},first:{borderTopWidth:(k.height/100)*10,borderLeftWidth:"0px",borderRightWidth:"0px",borderBottomWidth:(k.height/100)*10,borderTopColor:k.transparent,borderBottomColor:k.transparent,borderLeftColor:"#999",borderRightColor:"#999",top:k.top-(k.height/100)*10,left:k.left+(k.width/2)},second:{borderTopWidth:"0px",borderLeftWidth:"0px",borderRightWidth:k.width,borderBottomWidth:"0px",borderTopColor:k.transparent,borderBottomColor:k.transparent,borderLeftColor:k.transparent,borderRightColor:k.toColor,top:k.top,left:k.left}},rl:{start:{width:"0px",fontSize:"0px",lineHeight:"0px",borderTopWidth:"0px",borderLeftWidth:"0px",borderRightWidth:k.width,borderBottomWidth:"0px",borderTopColor:k.transparent,borderBottomColor:k.transparent,borderLeftColor:k.transparent,borderRightColor:k.bgColor,borderStyle:"solid",height:k.height},first:{borderTopWidth:(k.height/100)*10,borderLeftWidth:"0px",borderRightWidth:"0px",borderBottomWidth:(k.height/100)*10,borderTopColor:k.transparent,borderBottomColor:k.transparent,borderLeftColor:"#999",borderRightColor:"#999",top:k.top-(k.height/100)*10,left:k.left+(k.width/2)},second:{borderTopWidth:"0px",borderLeftWidth:k.width,borderRightWidth:"0px",borderBottomWidth:"0px",borderTopColor:k.transparent,borderBottomColor:k.transparent,borderLeftColor:k.toColor,borderRightColor:k.transparent,top:k.top,left:k.left}}};h=m;i=function(){var n=k.target;return n&&n.jquery?n.html():n};function g(o,n){o.queue(function(){k.onBefore();o.html("").css(j[k.direction].start);o.dequeue()});o.animate(j[k.direction].first,k.speed);o.queue(function(){k.onAnimation();o.dequeue()});o.animate(j[k.direction].second,k.speed);o.queue(function(){n.css({backgroundColor:k.toColor,visibility:"visible"});var p=i();if(p){n.html(p)}o.remove();k.onEnd();n.removeData("flipLock");o.dequeue()})}g(c("#"+l),h)})}})(jQuery);